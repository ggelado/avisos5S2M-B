---
layout: default
---
{{ content }}
<hr>

<div class="edit-notice">
  <p>
    <a
      href="https://github.com/ggelado/avisos5S2M-B/edit/main/{{ page.path }}"
      target="_blank"
      rel="noopener"
      class="edit-btn"
    >
      âœï¸ Editar aviso
    </a>
  </p>

  <p>
    <a
      href="https://notifierpushrss.onrender.com/generarPDF/{{ page.path }}"
      target="_blank"
      rel="noopener"
      class="download-btn"
    >
      ğŸ“„ Descargar aviso en PDF
    </a>
  </p>
</div>

<!-- Marco post como visto para el resaltado en pÃ¡gina principal -->
<script>
(() => {
  const url = location.pathname; // SIN query params
  markPostAsSeen(url);
})();
</script>

{% if page.expires %}
<script>
(() => {
  const expires = '{{ page.expires | date: "%Y-%m-%dT%H:%M:%S%z" }}';
  if (expires) {
    const expiresDate = new Date(expires);
    const now = new Date();

    if (now > expiresDate) {
      const warning = document.createElement('div');
      warning.className = 'aviso-caducado';
      warning.textContent = 'Este aviso ha caducado y no se garantiza que siga siendo vÃ¡lido.';

      const content = document.querySelector('.post-expires') || document.body;
      content.parentNode.insertBefore(warning, content);

      fetch('https://notifierpushrss.onrender.com/api/check-caducidades')
        .catch(err => console.error('Error al verificar caducidades:', err));
    }
  }
})();
</script>
{% endif %}